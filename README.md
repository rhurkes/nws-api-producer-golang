# Description

# Build & Run
TODO

# Kafka
`kafkacat -b localhost -t wx.nws.api`

- Change retention time to purge topic: `kafka-configs.sh --zookeeper localhost:2181 --alter --entity-type topics --entity-name wx.nws.api --add-config retention.ms=1000`

`kafka-configs.sh --zookeeper localhost:2181 --alter --entity-type topics --entity-name wx.nws.api --add-config retention.ms=86400000`

`kafka-configs.sh --zookeeper localhost:2181 --entity-type topics --entity-name wx.nws.api i --describe`

# Implemented Products - https://en.wikipedia.org/wiki/Specific_Area_Message_Encoding
- `LSR` Local Storm Report. Only grabs the last 30 minutes on a fresh start as there can be 1000+ on the product list response.
- `SWO` Severe Storm Outlook Narrative. Includes the 1/2/3/4-8 day outlooks (ACUS01/02/03/48) and Mesoscale Discussions (ACUS11).
        MDs contain their own coordinates and do not have a corresponding PTS.
- `SEL` Severe Local Storm Watch and Watch Cancellation Msg. Issued when watches are issued. Has the watch text.
- `TOR` Tornado Warning. Can contain Tornado Emergency status (https://en.wikipedia.org/wiki/Tornado_emergency)
- `SVR` Severe Thunderstorm Warning
- `SVS` Severe Weather Statement. Can contain Tornado Emergency status (https://en.wikipedia.org/wiki/Tornado_emergency)
- `AFD` Area Forecast Discussion
- `FFW` Flash Flood Warning

# TODO - have data
- `SEV` Shows coordinates for all active watches.
- `PTS` Probabilistic Outlook Points. Contains coordinates for SWO outlooks (WUUS01/02/03/48).

# TODO - need data
- `FFA` Flash Flood Watch

# Not-implemented Products
- `WOU` Watch Outline Update. Has the counties listed out for each watch.
- `WCN` Weather Watch Clearance Notification. Shows issued watches, but several minutes later. Generated by WFOs. Don't use this for anything.
- `SPS` Special Weather Statement (Why would I want this?)
- `FLA` Flood Watch - do I care about these?
- `FLW` Flood Warning - do I care about these?


# TODO
- Assess all property names, so they make sense, and have correct values
- Assess which properties are missing from products
- Remove logger from tests, should just use println
- Uncomment integration tests
- Add remaining products
- "Until" times for warnings/watches/etc.
- Add string enums - worth it?
- Show debug logs, Disable logger output during tests
- Feature vs product vs ???
- Fix error handling of parsers
- Are api/topic dao named correctly?
- Error handling for kafka producing
- Functional and integration tests
- Tests only run with Kafka running/mock Kafka
- Package clean up
- Evaluate performance
- Evaluate error handling
- Heartbeat for producer
- Update README: Clean up, deployment, testing
- Logging / Funnel / Logrotate

# Deeper questions
- Return an error, or an empty object of the type specified in the signature? ie. getProductList()
- what is a dao *really*? what is a "gateway"? a "service"?
- difference between functional and integration tests?
- cmd structure, how to structure golang projects
